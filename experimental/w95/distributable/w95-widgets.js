(()=>{var e={167:()=>{w95.widget("bitmap",(function({x:e=0,y:t=0,image:n=w95.icon.applicationIcon32x32,width:o=n?.width||0,height:r=n?.height||0,color:s=w95.palette.named.white,children:i=[],isDisabled:a=!1,styleHints:d=[],cursor:w,onMouseDown:g,onMouseUp:u,onMouseMove:l,onMouseLeave:c,onMouseEnter:h}={}){return w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof o),w95.debug?.assert("number"==typeof r),w95.debug?.assert("object"==typeof s),w95.debug?.assert(Array.isArray(i)),w95.debug?.assert(Array.isArray(d)),w95.debug?.assert(["undefined","object"].includes(typeof w)),w95.debug?.assert(["undefined","object"].includes(typeof n)),w95.debug?.assert(["undefined","function"].includes(typeof g)),w95.debug?.assert(["undefined","function"].includes(typeof u)),w95.debug?.assert(["undefined","function"].includes(typeof l)),w95.debug?.assert(["undefined","function"].includes(typeof c)),w95.debug?.assert(["undefined","function"].includes(typeof h)),{get x(){return e},get y(){return t},get width(){return o},get height(){return r},get cursor(){return w},Form:()=>n?[...i,Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(o,0),Rngon.vertex(o,r),Rngon.vertex(0,r)],{texture:n,color:s,allowAlphaReject:!0,isColorInverted:d.includes(w95.styleHint.inverted),isDisabled:a})]:[],Event:{mouseleave({at:e}){return c?.({at:e,widget:this})},mouseenter({at:e}){return h?.({at:e,widget:this})},mousedown({at:e}){return g?.({at:e,widget:this})},mouseup({at:e}){return u?.({at:e,widget:this})},mousemove({at:e}){return l?.({at:e,widget:this})}}}}))},328:()=>{w95.widget("button",(function({x:e=0,y:t=0,width:n,height:o=22,icon:r,text:s=(r?"":"Button"),color:i=w95.color.black,font:a=w95.font.default,isDisabled:d=!1,elide:w=!1,shape:g=w95.buttonShape.regular,bold:u=!1,invert:l=!1,styleHints:c=[],onClick:h,onMouseEnter:f,onMouseLeave:b,onMouseUp:p,onMouseDown:y}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert(["undefined","number"].includes(typeof n)),w95.debug?.assert("number"==typeof o),w95.debug?.assert("string"==typeof s),w95.debug?.assert("string"==typeof g),w95.debug?.assert("boolean"==typeof d),w95.debug?.assert("boolean"==typeof w),w95.debug?.assert("boolean"==typeof u),w95.debug?.assert("boolean"==typeof l),w95.debug?.assert(Array.isArray(c)),w95.debug?.assert(["undefined","object"].includes(typeof r)),w95.debug?.assert(["object","string"].includes(typeof i)),w95.debug?.assert(["object","string"].includes(typeof a)),w95.debug?.assert(["undefined","function"].includes(typeof h)),w95.debug?.assert(["undefined","function"].includes(typeof b)),w95.debug?.assert(["undefined","function"].includes(typeof f)),w95.debug?.assert(["undefined","function"].includes(typeof p)),w95.debug?.assert(["undefined","function"].includes(typeof y)),"string"==typeof i&&(i=w95.color[i]||w95.color.black),"string"==typeof a&&(a=w95.font[a]||w95.font.default),void 0===n&&(n=6*w95.font.default.regular.spaceWidth+w95.font.stringWidth(s,a));const m=w95.state(!1),x=w95.state(!1),v=g===w95.buttonShape.tabControl,R=l||m.now&&x.now&&!d&&!v;return{get x(){return e},get y(){return t},get width(){return n},get height(){return o},get isGrabbed(){return m.now},get isHovered(){return x.now},get text(){return s},Form:()=>[w95.widget.frame({width:n,height:o,shape:g===w95.buttonShape.regular?w95.frameShape.widget:g===w95.buttonShape.dropdown?w95.frameShape.dropdownButton:g===w95.buttonShape.tabControl?w95.frameShape.tabControlButton:w95.frameShape.none,styleHints:[...c,R?w95.styleHint.inverted:0],backgroundColor:w95.palette.widget.background,children:[w95.widget.label({x:~~((r?r.width+4:0)+~~(R||l)),y:~~(R||l),width:n-(r?r.width+4:0),height:o,text:s,color:i,font:a,elide:w,isDisabled:d,styleHints:[w95.styleHint.action,w95.styleHint.alignVCenter,w95.styleHint.alignHCenter,u?w95.styleHint.bold:0]},{hideIf:!s.length}),w95.widget.bitmap({x:1+~~((s?4:r?n/2-r.width/2:0)+~~R),y:1+~~((r?o/2-r.height/2:0)+~~R),image:r,color:w95.palette.widget.disabled2},{hideIf:!r||!r.boolean||!d}),w95.widget.bitmap({x:~~((s?4:r?n/2-r.width/2:0)+~~R),y:~~((r?o/2-r.height/2:0)+~~R),image:r,isDisabled:d,color:r?.boolean?d?w95.palette.widget.disabled1:w95.palette.widget.foreground:w95.palette.named.white},{hideIf:!r})]})],Event:{mouseleave({at:e}){return x.set(!1),b?.({at:e,widget:this})??!0},mouseenter({at:e}){return x.set(!0),f?.({at:e,widget:this})??!0},mousedown({at:e}){if(!d)return m.set(!0),y?.({at:e,widget:this})??!0},mouseup({at:e}){if(!d)return x.now&&m.now&&h?.({at:e,widget:this}),m.set(!1),p?.({at:e,widget:this})??!0;m.set(!1)}}}}))},149:()=>{w95.widget("checkbox",(function({x:e=0,y:t=0,label:n="Checkbox",state:o=new w95.StateVariable(!1),isDisabled:r=!1,isEditable:s=!0,color:i=w95.palette.widget.foreground,onChange:a}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("string"==typeof n),w95.debug?.assert("boolean"==typeof r),w95.debug?.assert("boolean"==typeof s),w95.debug?.assert(o instanceof w95.StateVariable),w95.debug?.assert("boolean"==typeof o.now),w95.debug?.assert("object"==typeof i),w95.debug?.assert(["undefined","function"].includes(typeof a));const d=w95.state(!1),w=w95.state(!1),g=w95.state(1),u=w95.font.default.regular.lineHeight+r;return{get x(){return e},get y(){return t},get width(){return g.now},get height(){return u},get isGrabbed(){return d.now},get isChecked(){return o.now},get isHovered(){return w.now},Mounted(){g.set(Math.max(...this.$descendants.map((e=>e.at.x+e.widget.width))))},Form:()=>[w95.widget.frame({width:13,height:13,shape:w95.frameShape.input,backgroundColor:r||d.now&&w.now?w95.palette.window.background:w95.palette.named.white,children:[w95.widget.bitmap({x:3,y:3,image:w95.icon.checkmark,color:r?w95.palette.widget.disabled1:w95.palette.widget.foreground},{hideIf:!o.now})]}),w95.widget.label({x:19,y:0,width:n.length?w95.font.stringWidth(n):0,height:u,text:n,color:i,isDisabled:r,styleHints:[w95.styleHint.alignVCenter,w95.styleHint.action]},{hideIf:!n.length})],Event:{mouseleave(){w.set(!1)},mouseenter(){w.set(!0)},mousedown(){if(!r)return d.set(!0),!0},mouseup(){if(r)return;let e=!0;return s&&d.now&&w.now&&(o.set(!o.now),e=a?.(o.now,this)??!0),d.set(!1),e}}}}))},11:()=>{w95.widget("desktopIcon",(function({x:e=0,y:t=0,width:n=74,height:o=60,text:r="Desktop icon",icon:s=w95.icon.applicationIcon32x32,styleHints:i=[],onActivate:a,isDisabled:d=!1}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert("number"==typeof o),w95.debug?.assert("string"==typeof r),w95.debug?.assert("object"==typeof s),w95.debug?.assert(Array.isArray(i)),w95.debug?.assert(["undefined","object"].includes(typeof s)),w95.debug?.assert(["undefined","function"].includes(typeof a)),w95.debug?.assert(32===s.width&&32===s.height);const w=w95.state(!1),g=Math.min(n,w95.font.stringWidth(r)+2);return{get x(){return e},get y(){return t},get width(){return this.$("layout").width},get height(){return this.$("layout").height},Mounted(){o=this.$childWidgets.reduce(((e,t)=>e+t.height),0)},Form:()=>w95.widget.verticalLayout({$name:"layout",width:n,height:o,padding:4,styleHints:[w95.styleHint.alignHCenter],children:[w95.widget.layoutSpacer({width:n}),w95.widget.bitmap({image:s,color:w.now?Rngon.color(127,127,191):w95.palette.named.white,styleHints:[w.now?w95.styleHint.focused:w95.styleHint.void],children:[w95.widget.bitmap({y:s.height-w95.icon.shortcutArrow.height,image:w95.icon.shortcutArrow},{hideIf:!i.includes(w95.styleHint.shortcut)})]}),w95.widget.label({width:g,text:r,wordWrap:!0,color:w95.palette.named.white,horizontalPadding:2,verticalPadding:1,backgroundColor:d?w95.palette.widget.background:w.now?w95.palette.named.navy:w95.palette.named.teal,styleHints:[w95.styleHint.fitContentsHorizontal,w95.styleHint.alignHCenter,w95.styleHint.action]})]}),Message:{blur(){w.set(!1)}},Event:{mousedown(){return w95.$recurseDescendantWidgets(w95.windowManager.root_widget(this),(e=>{e.Message?.blur?.()})),w.set(!0),!0},dblclick(){return a?.(this),!0}}}}))},428:()=>{w95.widget("dialog",(function({x:e=0,y:t=0,width:n=200,height:o=100,title:r="Dialog",isBlurred:s=!1,backgroundColor:i=w95.palette.window.background,children:a=[],move:d,onClose:w}={}){return w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert("number"==typeof o),w95.debug?.assert("string"==typeof r),w95.debug?.assert("object"==typeof i),w95.debug?.assert(Array.isArray(a)),w95.debug?.assert(["undefined","function"].includes(typeof d)),w95.debug?.assert(["undefined","function"].includes(typeof w)),s=w95.state(s),{get x(){return e},get y(){return t},get width(){return n},get height(){return o},get isBlurred(){return s.now},get isActiveDialog(){return!this._hideMesh},Mounted(){this.$("_dialog-title-bar")?.Message.setParent(this)},Form:()=>[w95.widget.panel({width:n,height:o,color:i},{hideIf:i===w95.palette.named.transparent}),w95.widget.frame({$name:"_dialog-contents",x:3,y:22,width:n-6,height:o-25,styleHints:[w95.styleHint.noBorder],children:a}),w95.widget.titleBar({$name:"_dialog-title-bar",x:3,y:3,width:n-6,height:18,isBlurred:s.now,title:r,styleHints:[w95.styleHint.dialog],onClose:w}),w95.widget.frame({$name:"_dialog-border",width:n,height:o,shape:w95.frameShape.dialog})],Message:{move(e=0,t=0){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),d?.(e,t,{isRelative:!0})},blur(){s.set(!0)},focus(){s.set(!1)}}}}))},752:()=>{w95.widget("domElement",(function({x:e=0,y:t=0,width:n,height:o,element:r,className:s,isDisabled:i=!1,addToDom:a=!0}={}){if(w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("boolean"==typeof i),w95.debug?.assert("boolean"==typeof a),w95.debug?.assert(r instanceof HTMLElement),w95.debug?.assert(["undefined","string"].includes(typeof s)),w95.debug?.assert(["undefined","number"].includes(typeof n)),w95.debug?.assert(["undefined","number"].includes(typeof o)),a&&!document.body.contains(r)&&document.body.prepend(r),r.classList.add(...["w95-dom-element",s].filter((e=>void 0!==e))),r.classList[i?"add":"remove"]("disabled"),!n||!o){const e=r.getBoundingClientRect();n=n||e.width/w95.shell.display.scale,o=o||e.height/w95.shell.display.scale,w95.debug?.assert("number"==typeof n),w95.debug?.assert("number"==typeof o),w95.debug?.assert(n>0),w95.debug?.assert(o>0)}return{get x(){return e},get y(){return t},get width(){return n},get height(){return o},get dom(){return r},Opened(){r.classList.remove("hidden")},Closed(){r.classList.add("hidden")},Form:()=>Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(n,0),Rngon.vertex(n,o),Rngon.vertex(0,o)],{color:Rngon.color(0,0,0,0)}),Message:{setIsSuppressed(e){r.style.zIndex=this.$app._canvas.style.zIndex-(e?1:-1)}}}}))},420:()=>{w95.widget("dropdownBox",(function({x:e=0,y:t=0,width:n=200,isDisabled:o=!1,items:r={A:{}},styleHints:s=[],itemIndex:i=0,newItemIndex:a}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert(Array.isArray(s)),w95.debug?.assert("object"==typeof r||Array.isArray(r)),w95.debug?.assert(["number","string"].includes(typeof i)),w95.debug?.assert(["undefined","function"].includes(typeof a)),Array.isArray(r)||(r=Object.entries(r).map((e=>({label:e[0],options:e[1]})))),"string"==typeof i&&(i=r.findIndex((e=>e.label===i)),w95.debug?.assert(i>=0)),(i<0||i>=Object.keys(r).length)&&(i=0);const d=w95.state(!1),w=s.includes(w95.styleHint.noBorder),g=w?17:21,u=r[i].label,l=d.now?()=>d.set(!1):()=>d.set(!0);return{get x(){return e},get y(){return t},get width(){return n},get height(){return g},get text(){return u},Form:()=>[w95.widget.frame({width:n,height:g,shape:w?w95.frameShape.none:w95.frameShape.input,backgroundColor:o?w95.palette.window.background:w95.palette.named.white,children:[w95.widget.label({x:w?4:5,y:w?1:2,width:n-16-7,height:g-4,text:u,color:o?w95.palette.widget.disabled1:w95.palette.widget.foreground,styleHints:[w95.styleHint.alignVCenter]})],onMouseDown:o?void 0:l}),w95.widget.button({x:n-16-(w?0:2),y:w?0:2,width:16,height:g-(w?1:4),icon:w95.icon.arrowDown,isDisabled:o,shape:w95.buttonShape.dropdown,onMouseDown:l}),w95.widget.dropdownBoxList({y:g-(w?1:0),width:n+(w?1:0),items:r,itemIndex:i,isOpen:d.now,newItemIndex(e,t){w95.debug?.assert("dropdownBoxItem"===e._type),d.set(!1),i!==t&&a?.(t,e)},onCloseRequested(){d.set(!1)}},{hideIf:!d.now})],Message:{open(){d.set(!0)},close(){d.set(!1)}}}}))},879:()=>{w95.widget("dropdownBoxItem",(function({text:e="",onSelect:t,onMouseEnter:n,onMouseLeave:o}={}){w95.debug?.assert("string"==typeof e),w95.debug?.assert(["undefined","function"].includes(typeof t)),w95.debug?.assert(["undefined","function"].includes(typeof n)),w95.debug?.assert(["undefined","function"].includes(typeof o));const r=w95.state(void 0),s=w95.state(!1),i=w95.state(!1),a=w95.state(0),d=w95.state(0),w=w95.state(4+w95.font.stringWidth(e));return{get x(){return a.now},get y(){return d.now},get width(){return w.now},get height(){return 15},get text(){return e},get isHighlighted(){return s.now},get isHovered(){return i.now},Form:()=>[...s.now?[Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(w.now,0),Rngon.vertex(w.now,15),Rngon.vertex(0,15)],{color:w95.palette.named.navy})]:[],w95.widget.label({x:4,width:w.now-4,height:15,text:e,styleHints:[w95.styleHint.alignVCenter],color:s.now?w95.palette.named.white:w95.palette.named.black})],Event:{mousedown:()=>(s.set(!0),!0),mouseup(){return w95.debug?.assert("dropdownBoxList"===r.now._type),t?.(this),r.now.Message.select(this),!0},mouseenter(){return i.set(!0),n?.(this)},mouseleave(){return i.set(!1),o?.(this)}},Message:{resize(e=0){w95.debug?.assert("number"==typeof e),w.set(e)},moveTo(e=0,t=0){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),a.set(e),d.set(t)},setParent(e){w95.debug?.assert("object"==typeof e),w95.debug?.assert("w95-widget"===e._what),r.set(e)},highlight(e=!1){w95.debug?.assert("boolean"==typeof e),s.set(e)}}}}))},220:()=>{w95.widget("dropdownBoxList",(function({x:e=0,y:t=0,width:n=100,isOpen:o=!1,items:r=[],itemIndex:s=0,newItemIndex:i,onCloseRequested:a}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert("boolean"==typeof o),w95.debug?.assert("number"==typeof s),w95.debug?.assert(Array.isArray(r)),w95.debug?.assert(["undefined","function"].includes(typeof a)),w95.debug?.assert(["undefined","function"].includes(typeof i));const d=w95.state(100),w=w95.state(void 0,(({widget:e})=>{e&&e.listItems.forEach(((e,t)=>e.Message.highlight(t===w.now)))}));return{get x(){return e},get y(){return t},get width(){return n},get height(){return d.now},get listItems(){return this.$("_listItemsContainer").$childWidgets},get isActivePopupMenu(){return o},Form(){const e=r.map(((e,t)=>w95.widget.dropdownBoxItem({...e.options,text:e.label,onMouseEnter:()=>{w.set(t)}})));return w95.widget.frame({$name:"_listItemsContainer",width:n,height:d.now,shape:w95.frameShape.dropdownList,backgroundColor:w95.palette.named.white,children:e},{hideIf:!e.length})},Mounted(){w95.debug?.assert(this.listItems.every((e=>"dropdownBoxItem"===e._type)));const e=this.listItems.reduce(((e,t)=>e+t.height),0);this.listItems.forEach((e=>e.Message.resize(n-2))),d.set(e+2);let t=1;for(const e of this.listItems)e.Message.moveTo(1,t),t+=e.height;void 0===w.now&&this.Message.select(this.listItems[s]),this.listItems.forEach((e=>e.Message.setParent(this)))},Closed(){w.set(s)},Message:{select(e){w95.debug?.assert("object"==typeof e),w95.debug?.assert("dropdownBoxItem"===e._type);const t=this.listItems.findIndex((t=>t.text===e.text));w.set(t),i?.(e,t),this.Message.close()},close(){a?.()}}}}))},830:()=>{w95.widget("dynamicContent",(function({x:e=0,y:t=0,children:n}={}){w95.debug?.assert(Array.isArray(n));const o=w95.state(0),r=w95.state(0);return{get x(){return e},get y(){return t},get width(){return o.now},get height(){return r.now},Mounted(){const e=this.$childWidgets.filter((e=>!e._hideMesh));o.set(Math.max(...e.map((e=>e.x+e.width)))),r.set(Math.max(...e.map((e=>e.y+e.height))))},Form:()=>n}}))},856:()=>{w95.widget("dynamicWrapper",(function({widget:e}={}){const t=w95.state(0),n=w95.state(0),o=w95.state(0),r=w95.state(0);return{get x(){return t.now},get y(){return n.now},get width(){return o.now},get height(){return r.now},Mounted(){this.Message.resize(this.$childWidgets[0].width,this.$childWidgets[0].height)},Form:()=>[e],Message:{move(e,o){w95.debug?.assert(Number.isInteger(e)),w95.debug?.assert(Number.isInteger(o)),t.set(e),n.set(o)},resize(e,t){w95.debug?.assert(Number.isInteger(e)),w95.debug?.assert(Number.isInteger(t)),o.set(e),r.set(t)}}}}))},255:()=>{w95.widget("frame",(function({x:e=0,y:t=0,width:n=200,height:o=100,shape:r=w95.frameShape.box,isResizable:s=!1,isGrabbable:i=!1,styleHints:a=[],children:d=[],backgroundColor:w,cursor:g,color:u=w95.palette.frame.darker,onMouseDown:l,onMouseUp:c,onClick:h,onDoubleClick:f,onResizeStart:b,onResizeEnd:p,onMouseMove:y,onMouseLeave:m,onMouseEnter:x}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert("number"==typeof o),w95.debug?.assert("string"==typeof r),w95.debug?.assert("boolean"==typeof s),w95.debug?.assert("object"==typeof u),w95.debug?.assert(Array.isArray(a)),w95.debug?.assert(Array.isArray(d)),w95.debug?.assert(["undefined","object"].includes(typeof w)),w95.debug?.assert(["undefined","object"].includes(typeof g)),w95.debug?.assert(["undefined","function"].includes(typeof l)),w95.debug?.assert(["undefined","function"].includes(typeof c)),w95.debug?.assert(["undefined","function"].includes(typeof h)),w95.debug?.assert(["undefined","function"].includes(typeof f)),w95.debug?.assert(["undefined","function"].includes(typeof y)),w95.debug?.assert(["undefined","function"].includes(typeof m)),w95.debug?.assert(["undefined","function"].includes(typeof x));const v=w95.state(!1,w95.noEffect),R=w95.state(!1,w95.noEffect),M=w95.state({},w95.noEffect),k=w95.state(void 0,w95.noEffect),H=w95.state(!1);return{get x(){return e},get y(){return t},get width(){return n},get height(){return o},get isHovered(){return R.now},get isGrabbed(){return i&&v.now},get isBorderGrabbed(){return s&&H.now},get borderHoverStatus(){return M.now},get cursor(){if(s){if(M.now.leftTop)return w95.cursor.hvResizeOut;if(M.now.rightTop)return w95.cursor.hvResizeIn;if(M.now.leftBottom)return w95.cursor.hvResizeIn;if(M.now.rightBottom)return w95.cursor.hvResizeOut;if(M.now.left||M.now.right)return w95.cursor.hResize;if(M.now.top||M.now.bottom)return w95.cursor.vResize}if(g)return g},Form:()=>[...d,...S()],Message:{setParent(e){w95.debug?.assert("w95-widget"===e?._what),w95.debug?.assert("window"===e?._type),k.set(e)}},Event:{mouseleave({at:e}){return R.set(!1),H.now||M.set({}),m?.({at:e,widget:this})},mouseenter({at:e}){return R.set(!0),x?.({at:e,widget:this})},mousedown({at:e}){const t=H.now;return v.set(!0),H.set(s&&Object.values(M.now).some((e=>e))),H.now&&!t&&b?.(),!!H.now||l?.({at:e,widget:this})},dblclick({at:e}){return f?.({at:e,widget:this})},mouseup({at:e}){H.now&&p?.(),v.set(!1),M.set({}),H.set(!1);const t=c?.({at:e,widget:this});return!R.now||h?.({at:e,widget:this}),t},mousemove({event:e,at:t}){return function(e){if(w95.debug?.assert("number"==typeof e.x),w95.debug?.assert("number"==typeof e.y),!s||H.now)return;const t=r===w95.frameShape.selector?4:18;M.set({rightTop:e.y<t&&e.x>=n-4||e.y<4&&e.x>=n-t,rightBottom:e.y>=o-t&&e.x>=n-4||e.y>=o-4&&e.x>=n-t,leftTop:e.y<t&&e.x<4||e.y<4&&e.x<t,leftBottom:e.y>=o-t&&e.x<4||e.y>=o-4&&e.x<t,left:e.x<4,right:e.x>=n-4,top:e.y<4,bottom:e.y>=o-4})}(t),H.now&&["window","dialog"].includes(k.now?._type)&&(w95.debug?.assert("number"==typeof e?.movementX),w95.debug?.assert("number"==typeof e?.movementY),M.now.rightBottom?k.now.Message.resize(e.movementX/w95.shell.display.scale,e.movementY/w95.shell.display.scale):M.now.rightTop?(k.now.Message.resize(e.movementX/w95.shell.display.scale,-e.movementY/w95.shell.display.scale),k.now.Message.move(0,e.movementY/w95.shell.display.scale)):M.now.leftBottom?(k.now.Message.resize(-e.movementX/w95.shell.display.scale,e.movementY/w95.shell.display.scale),k.now.Message.move(e.movementX/w95.shell.display.scale,0)):M.now.leftTop?(k.now.Message.resize(-e.movementX/w95.shell.display.scale,-e.movementY/w95.shell.display.scale),k.now.Message.move(e.movementX/w95.shell.display.scale,e.movementY/w95.shell.display.scale)):M.now.right||M.now.bottom?k.now.Message.resize(M.now.right?e.movementX/w95.shell.display.scale:0,M.now.bottom?e.movementY/w95.shell.display.scale:0):(M.now.left||M.now.top)&&(k.now.Message.resize(M.now.left?-e.movementX/w95.shell.display.scale:0,M.now.top?-e.movementY/w95.shell.display.scale:0),k.now.Message.move(M.now.left?e.movementX/w95.shell.display.scale:0,M.now.top?e.movementY/w95.shell.display.scale:0))),y?.({event:e,isGrabbed:i&&v.now,widget:this})}}};function S(){if(w===w95.palette.named.transparent||a.includes(w95.styleHint.noBorder)||a.includes(w95.styleHint.flat))return[];const e={selector(e,t){const n=w95.color.blue;return[Rngon.ngon([Rngon.vertex(-2,-2),Rngon.vertex(2,-2),Rngon.vertex(2,2),Rngon.vertex(-2,2)],{color:n}),Rngon.ngon([Rngon.vertex(~~(e/2)-2,-2),Rngon.vertex(~~(e/2)-2+4,-2),Rngon.vertex(~~(e/2)-2+4,2),Rngon.vertex(~~(e/2)-2,2)],{color:n}),Rngon.ngon([Rngon.vertex(-2+e,-2),Rngon.vertex(-2+e+4,-2),Rngon.vertex(-2+e+4,2),Rngon.vertex(-2+e,2)],{color:n}),Rngon.ngon([Rngon.vertex(-2+e,-2+t),Rngon.vertex(-2+e+4,-2+t),Rngon.vertex(-2+e+4,-2+t+4),Rngon.vertex(-2+e,-2+t+4)],{color:n}),Rngon.ngon([Rngon.vertex(~~(e/2)-2,-2+t),Rngon.vertex(~~(e/2)-2+4,-2+t),Rngon.vertex(~~(e/2)-2+4,-2+t+4),Rngon.vertex(~~(e/2)-2,-2+t+4)],{color:n}),Rngon.ngon([Rngon.vertex(-2,-2+t),Rngon.vertex(2,-2+t),Rngon.vertex(2,-2+t+4),Rngon.vertex(-2,-2+t+4)],{color:n}),Rngon.ngon([Rngon.vertex(-2,~~(t/2)-2),Rngon.vertex(2,~~(t/2)-2),Rngon.vertex(2,~~(t/2+4)-2),Rngon.vertex(-2,~~(t/2+4)-2)],{color:n}),Rngon.ngon([Rngon.vertex(-2+e,~~(t/2)-2),Rngon.vertex(-2+e+4,~~(t/2)-2),Rngon.vertex(-2+e+4,~~(t/2+4)-2),Rngon.vertex(-2+e,~~(t/2+4)-2)],{color:n})]},dialog:(e,t)=>[Rngon.ngon([Rngon.vertex(1,1),Rngon.vertex(e-2,1)],{color:w95.palette.frame.light}),Rngon.ngon([Rngon.vertex(e-2,1),Rngon.vertex(e-2,t-1)],{color:w95.palette.frame.darker}),Rngon.ngon([Rngon.vertex(1,t-2),Rngon.vertex(e-1,t-2)],{color:w95.palette.frame.darker}),Rngon.ngon([Rngon.vertex(1,1),Rngon.vertex(1,t-1)],{color:w95.palette.frame.light}),Rngon.ngon([Rngon.vertex(e-1,0),Rngon.vertex(e-1,t)],{color:w95.palette.frame.dark}),Rngon.ngon([Rngon.vertex(0,t-1),Rngon.vertex(e,t-1)],{color:w95.palette.frame.dark}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(e,0)],{color:w95.palette.frame.lighter}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(0,t)],{color:w95.palette.frame.lighter})],resizableWindow:(e,t)=>[Rngon.ngon([Rngon.vertex(1,1),Rngon.vertex(e-2,1)],{color:w95.palette.frame.light}),Rngon.ngon([Rngon.vertex(2,1),Rngon.vertex(e-3,2)],{color:w95.palette.window.background}),Rngon.ngon([Rngon.vertex(e-2,1),Rngon.vertex(e-2,t-1)],{color:w95.palette.frame.darker}),Rngon.ngon([Rngon.vertex(e-3,2),Rngon.vertex(e-3,t-2)],{color:w95.palette.window.background}),Rngon.ngon([Rngon.vertex(1,t-2),Rngon.vertex(e-1,t-2)],{color:w95.palette.frame.darker}),Rngon.ngon([Rngon.vertex(2,t-3),Rngon.vertex(e-2,t-3)],{color:w95.palette.window.background}),Rngon.ngon([Rngon.vertex(1,1),Rngon.vertex(1,t-1)],{color:w95.palette.frame.light}),Rngon.ngon([Rngon.vertex(2,2),Rngon.vertex(2,t-2)],{color:w95.palette.window.background}),Rngon.ngon([Rngon.vertex(e-1,0),Rngon.vertex(e-1,t)],{color:w95.palette.frame.dark}),Rngon.ngon([Rngon.vertex(0,t-1),Rngon.vertex(e,t-1)],{color:w95.palette.frame.dark}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(e,0)],{color:w95.palette.frame.lighter}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(0,t)],{color:w95.palette.frame.lighter})],dropdownButton(e,t){const n={light:w95.palette.frame.light,lighter:w95.palette.frame.lighter,darker:w95.palette.frame.darker,dark:w95.palette.frame.dark};return a.includes(w95.styleHint.inverted)?[Rngon.ngon([Rngon.vertex(e-1,0),Rngon.vertex(e-1,t)],{color:n.darker}),Rngon.ngon([Rngon.vertex(0,t-1),Rngon.vertex(e,t-1)],{color:n.darker}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(e,0)],{color:n.darker}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(0,t)],{color:n.darker})]:[Rngon.ngon([Rngon.vertex(1,1),Rngon.vertex(e-2,1)],{color:n.light}),Rngon.ngon([Rngon.vertex(e-2,1),Rngon.vertex(e-2,t-1)],{color:n.darker}),Rngon.ngon([Rngon.vertex(1,t-2),Rngon.vertex(e-1,t-2)],{color:n.darker}),Rngon.ngon([Rngon.vertex(1,1),Rngon.vertex(1,t-1)],{color:n.light}),Rngon.ngon([Rngon.vertex(e-1,0),Rngon.vertex(e-1,t)],{color:n.dark}),Rngon.ngon([Rngon.vertex(0,t-1),Rngon.vertex(e,t-1)],{color:n.dark}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(e,0)],{color:n.lighter}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(0,t)],{color:n.lighter})]},widget(e,t){const n=(()=>{let e=w95.palette.frame.light,t=w95.palette.frame.lighter,n=w95.palette.frame.darker,o=w95.palette.frame.dark;return a.includes(w95.styleHint.inverted)&&([e,t,n,o]=[o,n,t,e]),{light:e,lighter:t,darker:n,dark:o}})();return[Rngon.ngon([Rngon.vertex(1,1),Rngon.vertex(e-2,1)],{color:n.lighter}),Rngon.ngon([Rngon.vertex(e-2,1),Rngon.vertex(e-2,t-1)],{color:n.darker}),Rngon.ngon([Rngon.vertex(1,t-2),Rngon.vertex(e-1,t-2)],{color:n.darker}),Rngon.ngon([Rngon.vertex(1,1),Rngon.vertex(1,t-1)],{color:n.lighter}),Rngon.ngon([Rngon.vertex(e-1,0),Rngon.vertex(e-1,t)],{color:n.dark}),Rngon.ngon([Rngon.vertex(0,t-1),Rngon.vertex(e,t-1)],{color:n.dark}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(e,0)],{color:n.light}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(0,t)],{color:n.light})]},tabControlButton(e,t){const n=a.includes(w95.styleHint.first),o={light:w95.palette.frame.light,lighter:w95.palette.frame.lighter,darker:w95.palette.frame.darker,dark:w95.palette.frame.dark};return[Rngon.ngon([Rngon.vertex(e-2,1)],{color:o.dark}),Rngon.ngon([Rngon.vertex(1,1)],{color:o.light}),Rngon.ngon([Rngon.vertex(2,t-2),Rngon.vertex(e-2,t-2)],{color:w95.palette.window.background}),Rngon.ngon([Rngon.vertex(n?2:0,t-1),Rngon.vertex(e,t-1)],{color:w95.palette.window.background}),Rngon.ngon([Rngon.vertex(2,1),Rngon.vertex(e-2,1)],{color:o.lighter}),Rngon.ngon([Rngon.vertex(e-2,2),Rngon.vertex(e-2,t-1)],{color:o.darker}),Rngon.ngon([Rngon.vertex(1,2),Rngon.vertex(1,t-(n?0:1))],{color:o.lighter}),Rngon.ngon([Rngon.vertex(e-1,2),Rngon.vertex(e-1,t-1)],{color:o.dark}),Rngon.ngon([Rngon.vertex(2,0),Rngon.vertex(e-2,0)],{color:o.light}),Rngon.ngon([Rngon.vertex(0,2),Rngon.vertex(0,t-(n?0:1))],{color:o.light})]},inlineWidget(e,t){return a.includes(w95.styleHint.inverted)?[Rngon.ngon([Rngon.vertex(e-1,0),Rngon.vertex(e-1,t)],{color:w95.palette.named.gray}),Rngon.ngon([Rngon.vertex(0,t-1),Rngon.vertex(e,t-1)],{color:w95.palette.named.gray}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(e,0)],{color:w95.palette.named.gray}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(0,t)],{color:w95.palette.named.gray})]:this.widget()},input(e,t){const n=(()=>{let e=w95.palette.frame.light,t=w95.palette.frame.lighter,n=w95.palette.frame.darker,o=w95.palette.frame.dark;return a.includes(w95.styleHint.inverted)&&([e,t,n,o]=[o,n,t,e]),{light:e,lighter:t,darker:n,dark:o}})();return[Rngon.ngon([Rngon.vertex(1,1),Rngon.vertex(e-2,1)],{color:n.dark}),Rngon.ngon([Rngon.vertex(e-2,1),Rngon.vertex(e-2,t-1)],{color:n.lighter}),Rngon.ngon([Rngon.vertex(1,t-2),Rngon.vertex(e-1,t-2)],{color:n.lighter}),Rngon.ngon([Rngon.vertex(1,1),Rngon.vertex(1,t-1)],{color:n.dark}),Rngon.ngon([Rngon.vertex(e-1,0),Rngon.vertex(e-1,t)],{color:n.light}),Rngon.ngon([Rngon.vertex(0,t-1),Rngon.vertex(e,t-1)],{color:n.light}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(e,0)],{color:n.darker}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(0,t)],{color:n.darker})]},plain:(e,t)=>[Rngon.ngon([Rngon.vertex(e-1,0),Rngon.vertex(e-1,t)],{color:u}),Rngon.ngon([Rngon.vertex(0,t-1),Rngon.vertex(e,t-1)],{color:u}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(e,0)],{color:u}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(0,t)],{color:u})],none:()=>[],box(e,t){const n=(()=>{let e=w95.palette.frame.light,t=w95.palette.frame.darker;return a.includes(w95.styleHint.raised)?[e,t]=[t,e]:a.includes(w95.styleHint.plain)&&(e=t),[e,t]})();return[Rngon.ngon([Rngon.vertex(e-1,0),Rngon.vertex(e-1,t)],{color:n[0]}),Rngon.ngon([Rngon.vertex(0,t-1),Rngon.vertex(e,t-1)],{color:n[0]}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(e,0)],{color:n[1]}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(0,t)],{color:n[1]})]},fancyBox(e,t){const n=[w95.palette.frame.light,w95.palette.frame.darker],o=this.box(e,t),r=this.box(e-2,t-2);for(const e of r){for(const t of e.vertices)t.x++,t.y++;e.material.color=n[(n.findIndex((t=>t===e.material.color))+1)%2]}return[...o,...r]},dropdownList:(e,t)=>[Rngon.ngon([Rngon.vertex(e-1,0),Rngon.vertex(e-1,t)],{color:w95.palette.named.black}),Rngon.ngon([Rngon.vertex(0,t-1),Rngon.vertex(e,t-1)],{color:w95.palette.named.black}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(e,0)],{color:w95.palette.named.black}),Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(0,t)],{color:w95.palette.named.black})]};w95.debug?.assert("function"==typeof e[r]);const t=e[r](n,o);return w&&t.push(Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(n,0),Rngon.vertex(n,o),Rngon.vertex(0,o)],{color:w})),t}}))},300:()=>{w95.widget("groupBox",(function({x:e=0,y:t=0,width:n=200,height:o=100,title:r="Group box",children:s=[],isDisabled:i=!1}={}){return w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert("number"==typeof o),w95.debug?.assert("string"==typeof r),w95.debug?.assert("boolean"==typeof i),w95.debug?.assert(Array.isArray(s)),r=` ${r} `,{get x(){return e},get y(){return t},get width(){return n},get height(){return o},Form:()=>[w95.widget.frame({y:~~(w95.font.default.regular.lineHeight/2),width:n,height:o-~~(w95.font.default.regular.lineHeight/2),shape:w95.frameShape.fancyBox,children:s}),w95.widget.label({x:7,y:~~i,width:w95.font.stringWidth(r),text:r,isDisabled:i,backgroundColor:w95.palette.window.background,styleHints:[w95.styleHint.action]})]}}))},501:()=>{w95.widget("horizontalLayout",(function({x:e=0,y:t=0,width:n=100,height:o=0,padding:r=3,styleHints:s=[],children:i=[]}={}){return w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert(Array.isArray(s)),w95.debug?.assert(Array.isArray(i)),o=w95.state(o),{get x(){return e},get y(){return t},get width(){return n},get height(){return o.now},Mounted(){let e=this.$childWidgets.filter((e=>!e.$childWidgets[0]._hideMesh));o.set(Math.max(o.now,e.map((e=>e.$childWidgets[0])).reduce(((e,t)=>Math.max(e,t.y+t.height)),0)));{const t=e.reduce(((e,t)=>{const n=t.$childWidgets[0];return e+n.width+("layoutSpacer"===n._type?0:r)}),-r*!!i.filter((e=>"layoutSpacer"!==e._type)).length);s.includes(w95.styleHint.alignRight)&&(e=e.reverse());let a=0;for(const i of e){const e=i.$childWidgets[0];let d=0;s.includes(w95.styleHint.alignVCenter)?d=~~((o.now-e.height)/2):s.includes(w95.styleHint.alignBottom)&&(d=o.now-e.height),"layoutSpacer"!==e._type&&(i.Message.resize(e.width,o.now),s.includes(w95.styleHint.alignRight)?i.Message.move(n-a-e.width,d):s.includes(w95.styleHint.alignLeft)?i.Message.move(a,0):s.includes(w95.styleHint.alignHCenter)?i.Message.move(a+~~((n-t)/2),d):i.Message.move(a,d)),a+=e.width+(e.width&&"layoutSpacer"!==e._type?r:0)}}},Form:()=>i.map((e=>w95.widget.dynamicWrapper({widget:e})))}}))},214:()=>{w95.widget("horizontalRule",(function({x:e=0,y:t=0,width:n=200}={}){return w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert(n>=0),{get x(){return e},get y(){return t},get width(){return n},get height(){return 2},Form:()=>[Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(n,0)],{color:w95.palette.frame.darker}),Rngon.ngon([Rngon.vertex(0,1),Rngon.vertex(n,1)],{color:w95.palette.frame.light})]}}))},997:()=>{w95.widget("horizontalSlider",(function({x:e=0,y:t=0,width:n=200,value:o=5,minValue:r=0,maxValue:s=10,isDisabled:i=!1,numSteps:a=s-r,newValue:d}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert(Number.isInteger(r)),w95.debug?.assert(Number.isInteger(s)),w95.debug?.assert(Number.isInteger(o)),w95.debug?.assert(Number.isInteger(a)),w95.debug?.assert(["undefined","function"].includes(typeof d)),w95.debug?.assert(a>1),w95.debug?.assert(s-r>0),w95.debug?.assert(o>=r&&o<=s);const w=w95.state(!1),g=w95.state(!1),u=i||w.now?w95.icon.horizontalSliderHandlePressed:w95.icon.horizontalSliderHandle,l=u.width,c=(n-l)/a,h=w95.state(m((o-r)/(s-r)*(n-l))),f=w95.state(0,w95.noEffect),b=Math.min(n/10,a),p=w95.state(Array.from({length:b+1}).map(((e,t)=>{const o=!t||t===b,r=t/b*(n-l);return Rngon.ngon([Rngon.vertex(r,22),Rngon.vertex(r,22+(3+o))],{color:w95.palette.widget.foreground})})));return{get x(){return e},get y(){return t},get width(){return n},get height(){return 26},get value(){return o},get isGrabbed(){return w.now},get isHovered(){return g.now},Form:()=>[w95.widget.frame({x:~~(l/2),width:n-~~(l/2),height:26,shape:w95.frameShape.none,children:p.now}),w95.widget.frame({x:0,y:~~(u.height/2)-3,width:n,height:4,shape:w95.frameShape.input}),w95.widget.bitmap({x:h.now,y:0,image:u})],Event:{mouseleave:()=>(g.set(!1),!0),mouseenter:()=>(g.set(!0),!0),mousedown({at:e}){if(!i){if(e.x>=h.now&&e.x<h.now+l)w.set(!0),f.set(h.now-e.x);else{const t=Math.sign(e.x-h.now),{closestTick:n}=p.now.reduce(((e,n)=>{const o=Math.abs(h.now-n.vertices[0].x);return(h.now-n.vertices[0].x)*t<0&&o<e.distance&&(e.distance=o,e.closestTick=n),e}),{closestTick:void 0,distance:1/0});n&&y(n.vertices[0].x)}return!0}},mousemove:({at:e})=>(w.now&&y(m(e.x+f.now)),!0),mouseup(){if(!i)return w.set(!1),!0}}};function y(e){h.set(e);const t=Math.round(e/(n-l)*(s-r)+r);o!==t&&d?.(t)}function m(e){const t=~~(e/c+.5)*c;return~~Math.max(0,Math.min(t,n-l))}}))},192:()=>{w95.widget("label",(function({x:e=0,y:t=0,text:n="Label",width:o,height:r,isDisabled:s=!1,elide:i=!1,wordWrap:a=!1,allowFormatting:d=!0,horizontalPadding:w=0,verticalPadding:g=0,styleHints:u=[],font:l=w95.font.default,color:c=w95.color.black,backgroundColor:h=w95.color.transparent,cursor:f,onMouseDown:b,onMouseUp:p,onMouseMove:y,onMouseLeave:m,onMouseEnter:x}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("string"==typeof n),w95.debug?.assert("boolean"==typeof s),w95.debug?.assert("boolean"==typeof i),w95.debug?.assert("boolean"==typeof a),w95.debug?.assert("boolean"==typeof d),w95.debug?.assert("number"==typeof w),w95.debug?.assert("number"==typeof g),w95.debug?.assert(Array.isArray(u)),w95.debug?.assert(["object","string"].includes(typeof l)),w95.debug?.assert(["object","string"].includes(typeof c)),w95.debug?.assert(["object","string"].includes(typeof h)),w95.debug?.assert(["undefined","object","string"].includes(typeof f)),w95.debug?.assert(["undefined","number"].includes(typeof o)),w95.debug?.assert(["undefined","number"].includes(typeof r)),w95.debug?.assert(["undefined","function"].includes(typeof b)),w95.debug?.assert(["undefined","function"].includes(typeof p)),w95.debug?.assert(["undefined","function"].includes(typeof y)),w95.debug?.assert(["undefined","function"].includes(typeof m)),w95.debug?.assert(["undefined","function"].includes(typeof x)),"string"==typeof f&&(f=w95.cursor[f]||w95.cursor.arrow),"string"==typeof l&&(l=w95.font[l]||w95.font.default),"string"==typeof c&&(c=w95.color[c]||w95.color.black),"string"==typeof h&&(h=w95.color[h]||w95.color.transparent),s=s&&!u.includes(w95.styleHint.noDisable);let v=u.includes(w95.styleHint.bold)?l.bold:l.regular,R=u.includes(w95.styleHint.underlined),M=void 0!==o,k=void 0!==r;M||(o=w95.font.stringWidth(n,l,v,d)),k||(r=w95.font.stringHeight(n,l,v,d));const H=u.includes(w95.styleHint.fitContentsHorizontal),S=u.includes(w95.styleHint.fitContentsVertical);a&&w95.font.stringWidth(n,l,v,d)>o&&function(){const e=n.split(" "),t=[];let s=0;for(;e.length;){const n=e.findIndex(((t,n)=>w95.font.stringWidth(e.slice(0,n+1).join(" "),l,v,d)>=o));if(n<0){t[s]=e.join(" ");break}if(0===n){const n=e[0].split("").findIndex(((t,n)=>w95.font.stringWidth(e[0].substring(0,n+1),l,v,d)>=o));t[s]=e[0].substring(0,n),e[0]=e[0].substring(n)}else t[s]=e.splice(0,n).join(" ");s++}n=t.join("\n"),o=M?Math[H?"min":"max"](o,w95.font.stringWidth(n,l,v)):w95.font.stringWidth(n,l,v,d),r=k?Math[S?"min":"max"](r,t.length*v.lineHeight):w95.font.stringHeight(n,l,v,d)}(),i&&n.length&&w95.font.stringWidth(n,l,v,d)>o&&function(){const e=w95.font.stringWidth("...",l,v,d);if(e<o){do{n=n.slice(0,-1)}while(o<e+w95.font.stringWidth(n,l,v,d));n+="..."}else n="";M||(o=w95.font.stringWidth(n,l,v,d)),k||(r=w95.font.stringHeight(n,l,v,d))}();const C=s&&u.includes(w95.styleHint.action);return R&&r++,o+=w,r+=g,C&&(o+=!(1&o),r+=!(1&r)),{get x(){return e},get y(){return t},get width(){return o},get height(){return r},get text(){return n},get cursor(){return f},Form:()=>[...A(),...h===w95.palette.named.transparent?[]:[Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(o,0),Rngon.vertex(o,r),Rngon.vertex(0,r)],{color:h})]],Event:{mouseleave({at:e}){return m?.({at:e,widget:this})},mouseenter({at:e}){return x?.({at:e,widget:this})},mousedown({at:e}){return b?.({at:e,widget:this})},mouseup({at:e}){return p?.({at:e,widget:this})},mousemove({at:e}){return y?.({at:e,widget:this})}}};function A(){const e=[],t=w95.font.stringHeight(n,l,v);if(C?(e.push(...i(n,w95.palette.widget.disabled1,0,-1)),e.push(...i(n,w95.palette.widget.disabled2,1,0))):e.push(...i(n,s?w95.palette.widget.disabled1:c)),u.includes(w95.styleHint.alignVCenter)){const n=Math.floor((r-t)/2);for(const t of e)for(const e of t.vertices)e.y+=n}return e;function i(e,t=c,n=0,r=0){const i=n,a=[],w=t;let g=t;for(const c of e.split("\n")){const e=w95.font.stringWidth(c,l,v,d),h=[],f=c.split("");for(let e=0;e<f.length;e++){const o=f[e].charCodeAt(0);if(d){if(8===o){v=v===l.regular?l.bold:l.regular;continue}if(11===o){R=!R;continue}if(13===o){const n=c.slice(e+2,c.indexOf("}",e+2));s||(n.length>1?(g=t,t=w95.palette.named[n]):t="-"===n?w:g),e+=2+n.length;continue}}else if(13===o)continue;if([9,32].includes(o)){const e=v.spaceWidth*(9===o?4:1);R&&h.push(Rngon.ngon([Rngon.vertex(n,r+v.lineHeight),Rngon.vertex(n+e,r+v.lineHeight)],{color:t,isColorInverted:u.includes(w95.styleHint.inverted)})),n+=e;continue}const i=v[o]||v[63];n+=e&&i.leftSpacing||0,h.push(Rngon.ngon([Rngon.vertex(n,r),Rngon.vertex(n+i.width,r),Rngon.vertex(n+i.width,r+i.height),Rngon.vertex(n,r+i.height)],{texture:i,color:t,allowAlphaReject:!0,isColorInverted:u.includes(w95.styleHint.inverted),underlined:!0})),R&&h.push(Rngon.ngon([Rngon.vertex(n,r+v.lineHeight),Rngon.vertex(n+i.width+1,r+v.lineHeight)],{color:t,isColorInverted:u.includes(w95.styleHint.inverted)})),v.monospace?n+=v.spaceWidth+i.rightSpacing:n+=i.width+(i.rightSpacing||0)+1}if(n=i,r+=v.lineHeight,u.includes(w95.styleHint.alignHCenter)){const t=Math.round((o-e)/2);for(const e of h)for(const n of e.vertices)n.x+=t}if(u.includes(w95.styleHint.alignRight)){const t=o-e;for(const e of h)for(const n of e.vertices)n.x+=t}a.push(...h)}return a}}}))},786:()=>{w95.widget("layoutSpacer",(function({width:e=0,height:t=0}={}){return w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),{get x(){return 0},get y(){return 0},get width(){return e},get height(){return t},Form:()=>[]}}))},750:()=>{w95.widget("lineEdit",(function({x:e=0,y:t=0,state:n=new w95.StateVariable("Aa"),width:o=200,height:r=21,isEditable:s=!0,isDisabled:i=!1,styleHints:a=[],leftPadding:d=0,autofocus:w=!1,validator:g=/./,onSubmit:u,onChange:l}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof o),w95.debug?.assert("number"==typeof r),w95.debug?.assert("boolean"==typeof s),w95.debug?.assert(n instanceof w95.StateVariable),w95.debug?.assert("string"==typeof n.now),w95.debug?.assert(g instanceof RegExp),w95.debug?.assert(Array.isArray(a)),w95.debug?.assert(["undefined","function"].includes(typeof u)),w95.debug?.assert(["undefined","function"].includes(typeof l));const c=w95.state(n.now,w95.noEffect),h=w95.state(!0),f=w95.state(c.now.length),b=w95.state(0),p=w95.state(c.now.length),y=w95.state(!1);let m;c.now!==n.now&&(f.set(0),b.set(0),p.set(n.now.length),c.set(n.now));const x=a.includes(w95.styleHint.noBorder),v=x?0:2,R=c.now.slice(b.now,p.now),M=w95.font.default,k=M.regular,H=1+d+w95.font.stringWidth(c.now.slice(b.now,f.now),M);return{get x(){return e},get y(){return t},get width(){return o},get height(){return r},get hasFocus(){return y.now&&!i},get autofocus(){return w},get cursor(){return w95.cursor.text},Mounted(){m=setTimeout((()=>{y.now&&h.set(!h.now)}),500)},BeforeUnmount(){clearTimeout(m)},Form(){const e=w95.font.default.regular.lineHeight;return w95.widget.frame({x:0,y:x?-2:0,width:o,height:r,shape:x?w95.frameShape.none:w95.frameShape.input,backgroundColor:i?w95.palette.window.background:w95.palette.named.white,children:[w95.widget.label({x:5+d,y:v+(x?-1:0),width:o-5-v-d,height:r-v-v,text:R,color:i?w95.palette.widget.disabled1:w95.palette.widget.foreground,styleHints:[w95.styleHint.alignVCenter]}),Rngon.ngon([Rngon.vertex(4+H,~~((r-e)/2)+(x?-1:0)),Rngon.vertex(4+H,~~((r-e)/2)+e+(x?-1:0))],{color:h.now&&y.now&&!i?w95.palette.widget.foreground:w95.palette.named.transparent})]})},Message:{blur(){y.set(!1)},focus(){i||w95.windowManager.is_parent_window_blurred(this)||(h.set(!0),y.set(!0))},replaceText(e){w95.debug?.assert("string"==typeof e),c.now!==e&&(b.set(0),p.set(e.length),A(0),c.set(S(c.now.length)),c.set(C(e)),h.set(!0),A(c.length),l?.(c.now,this))},submit(){u&&!1!==u(c.now,this)&&this.Message.blur()}},Event:{mousedown({at:e}){if(i)return;const t=R.split("").findIndex(((t,n)=>{const o=t.charCodeAt(0),r=32===o?k.spaceWidth:k[o].width;return w95.font.stringWidth(R.substring(0,n),M)>e.x-r/2-5-d}));return A(b.now+(t<0?R.length:t)),!0},keypress(e){w95.debug?.assert(e instanceof KeyboardEvent),w95.debug?.assert("string"==typeof e.key);let t=c.now;1===e.key.length&&(t=C(e.key),c.now!==t&&(c.set(t),n.set(t),l?.(n.now,this)))},keydown(e){if(w95.debug?.assert(e instanceof KeyboardEvent),w95.debug?.assert("string"==typeof e.key),1===e.key.length)return;let t=c.now;if("Backspace"==e.key)t=S(-1);else if("Delete"==e.key)t=S(1);else if("Escape"==e.key)this.Message.blur();else if(["Enter","Return"].includes(e.key))this.Message.submit();else if("ArrowLeft"==e.key){if(A(f.now-1),f.now<b.now)for(b.set(b.now-1);!I(c.now.slice(b.now,p.now));)p.set(p.now-1)}else if("ArrowRight"==e.key&&(A(f.now+1),f.now>p.now))for(p.set(p.now+1);!I(c.now.slice(b.now,p.now));)b.set(b.now+1);c.now!==t&&(c.set(t),n.set(t),l?.(n.now))}}};function S(e=0){w95.debug?.assert("number"==typeof e);let t=c.now;switch(Math.sign(e)){case 1:for(t=c.now.slice(0,f.now)+c.now.slice(f.now+e),p.set(n.now.length);!I(t.slice(b.now,p.now));)p.set(p.now-1);break;case-1:{if(f.now<=0)break;const o=f.now,r=A(o+e);for(t=c.now.slice(0,r)+c.now.slice(o),p.set(n.now.length);!I(t.slice(b.now,p.now));)p.set(p.now-1);if(f.now<b.now)for(b.set(Math.max(0,b.now-10));!I(t.slice(b.now,p.now));)p.set(p.now-1);break}}return h.set(!0),t}function C(e=""){if(!s)return c.now;if(w95.debug?.assert("string"==typeof e),!(e=e.split("").filter((e=>g.test(e))).join("")).length)return c.now;const t=[c.now.slice(0,f.now),e,c.now.slice(f.now)].join("");for(h.set(!0),A(f.now+e.length,t),p.set(p.now+1);!I(t.slice(b.now,f.now));)b.set(b.now+1);for(;!I(t.slice(b.now,p.now));)p.set(p.now-1);return t}function A(e=0,t=c.now){return w95.debug?.assert("number"==typeof e),e=Math.max(0,Math.min(e,t.length)),h.set(!0),f.set(e),f.now}function I(e){return w95.font.stringWidth(e)+10+d<=o}}))},107:()=>{w95.widget("menu",(function({children:e=[]}={}){w95.debug?.assert(Array.isArray(e));const t=w95.state(0),n=w95.state(17),o=w95.state(40),r=w95.state(10),s=w95.state(!1),i=w95.state(!1,w95.noEffect),a=w95.state(void 0,w95.noEffect),d=w95.state(void 0,w95.noEffect),w=w95.state(void 0,w95.noEffect);return{get x(){return t.now},get y(){return n.now},get width(){return o.now},get height(){return r.now},get isOpen(){return s.now},get menuActions(){return this.$("_menuActionsContainer").$childWidgets},get isActivePopupMenu(){return s.now},Mounted(){const e=this.menuActions.filter((e=>"menuSeparator"!==e._type));w95.debug?.assert(this.menuActions.every((e=>["menuAction","menuSeparator"].includes(e._type)))),w95.debug?.assert(e.every((e=>"menuAction"===e._type)));for(const e of this.menuActions)e.Message?.setParentMenuWidget?.(this);const t=e.reduce(((e,t)=>Math.max(e,t.width)),0),n=this.menuActions.reduce(((e,t)=>e+t.height),0);o.set(t+6),r.set(n+6),this.menuActions.forEach((e=>e.Message.resize(t)));let s=3;for(const e of this.menuActions)e.Message.moveTo(3,s),s+=e.height},BeforeUnmount(){this.menuActions[d.now]?.Message.close?.()},Form:()=>[w95.widget.panel({width:o.now,height:r.now,color:w95.palette.widget.background},{hideIf:!s.now}),w95.widget.frame({$name:"_menuActionsContainer",width:o.now,height:r.now,shape:w95.frameShape.dialog,children:e},{hideIf:!s.now})],Event:{mouseenter(){i.set(!0)},mouseleave(){i.set(!1)},mousedown:()=>!0},Message:{itemHighlighted(e){w95.debug?.assert(["menuAction","menuSeparator"].includes(e?._type));const t=this.menuActions.findIndex((t=>t===e));w95.debug?.assert(t>=0),this.menuActions[d.now]!==e&&this.menuActions[d.now]?.Message.close?.(),clearTimeout(a.now),e.subMenu?a.set(setTimeout((()=>{this.menuActions[t].isHovered&&(d.set(t),w.set(e.subMenu),this.menuActions[t].Message.open?.())}),300)):this.menuActions[d.now]?.Message.close?.()},move(e,o){w95.debug?.assert(Number.isInteger(e)),w95.debug?.assert(Number.isInteger(o)),t.set(e),n.set(o)},open(){s.set(!0)},close(){s.set(!1),w.now?.Message.close()},checkItem(e){w95.debug?.assert("menuAction"===e?._type);const t=this.$("_menuActionsContainer").$childWidgets;w95.debug?.assert(t.includes(e));const n=t.filter((t=>t!==e&&t.isCheckable&&t.group===e.group));for(const e of n)e.Message.setChecked(!1);e.Message.setChecked(!e.isChecked)}}}}))},929:()=>{w95.widget("menuAction",(function({label:e="Menu item",group:t,submenu:n,icon:o,isTopLevel:r=!1,isCheckable:s=!1,isChecked:i=!1,isDisabled:a=!1,onClick:d,onMouseEnter:w,onMouseLeave:g,newCheckState:u}={}){w95.debug?.assert("string"==typeof e),w95.debug?.assert(e.length),w95.debug?.assert("boolean"==typeof r),w95.debug?.assert("boolean"==typeof s),w95.debug?.assert("boolean"==typeof i),w95.debug?.assert("boolean"==typeof a),w95.debug?.assert(["string","undefined"].includes(typeof t)),w95.debug?.assert(["function","undefined"].includes(typeof n)),w95.debug?.assert(["object","undefined"].includes(typeof o)),w95.debug?.assert(["function","undefined"].includes(typeof d)),w95.debug?.assert(["function","undefined"].includes(typeof w)),w95.debug?.assert(["function","undefined"].includes(typeof g)),w95.debug?.assert(["function","undefined"].includes(typeof u)),w95.debug?.assert(!s||!o);const l=w95.state(void 0,w95.noEffect),c=w95.state(0),h=w95.state(0),f=w95.state(!1),b=w95.state(!1),p=r?7:22,y=r?7:20,m=w95.state(p+w95.font.stringWidth(e)+y-1+(!r&&n?2:0)),x=r?[w95.styleHint.alignHCenter,w95.styleHint.alignVCenter]:[w95.styleHint.alignVCenter],v=void 0!==t;return{get x(){return c.now},get y(){return h.now},get width(){return m.now},get height(){return 18},get group(){return t},get subMenu(){return n&&this.$childWidgets[1]},get isOpen(){return this.subMenu?.isOpen},get isChecked(){return i},get isCheckabled(){return s},get isHovered(){return f.now},Mounted(){!r&&this.subMenu&&this.subMenu.Message.move(c.now+m.now-5,-3)},Form:()=>[w95.widget.panel({width:m.now,height:18,color:w95.palette.named.navy},{hideIf:!f.now&&!r||r&&!b.now||a}),n,w95.widget.bitmap({x:6+v,y:6,image:v?w95.icon.dotmarkBig:w95.icon.checkmark,color:a?w95.palette.widget.disabled1:w95.palette.widget.foreground,styleHints:[f.now?w95.styleHint.inverted:0]},{hideIf:!i}),w95.widget.bitmap({x:1,y:1,image:o},{hideIf:!o}),w95.widget.label({x:r?0:p,width:m.now-(r?0:p),height:18,text:e,isDisabled:a,styleHints:[...x,w95.styleHint.action,!a&&(b.now||!r&&f.now)?w95.styleHint.inverted:0]}),w95.widget.bitmap({x:m.now-10,y:5,image:w95.icon.arrowRight,color:w95.palette.widget.foreground,styleHints:[f.now?w95.styleHint.inverted:0]},{hideIf:!n||r})],Event:{mouseenter(){f.set(!0),r||l.now.Message.itemHighlighted(this)},mouseleave(){!r&&this.isOpen||f.set(!1)},mousedown(){if(!a)return this.subMenu&&this.Message[r?"toggle":"open"](),!0},mouseup(){if(!a&&!this.subMenu)return r||(f.set(!1),w95.windowManager.root_widget(this)?.menuBar?.Message.closeMenus()),s&&(w95.debug?.assert("menu"===l.now?._type),l.now?.Message.checkItem(this)),d?.(this)??!0},mousemove(){w95.windowManager.root_widget(this)?.menuBar?.Message.update()}},Message:{resize(e=0){w95.debug?.assert("number"==typeof e),m.set(e)},moveTo(e=0,t=0){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),c.set(e),h.set(t)},open(){this.subMenu?.Message.open(),b.set(!0)},close(){this.subMenu?.Message.close(),f.set(!1),b.set(!1)},toggle(){this.Message[this.subMenu?.isOpen?"close":"open"]()},setChecked(e){w95.debug?.assert("boolean"==typeof e),w95.debug?.assert(s),s&&u?.(e)},setParentMenuWidget(e){w95.debug?.assert("menu"===e?._type),l.set(e)}}}}))},882:()=>{w95.widget("menuBar",(function({x:e=0,y:t=0,width:n=200,height:o=18,children:r=[w95.widget.menuAction({isTopLevel:!0,label:"File"})]}={}){return w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert("number"==typeof o),w95.debug?.assert(Array.isArray(r)),{get x(){return e},get y(){return t},get width(){return n},get height(){return o},get items(){return this.$childWidgets.filter((e=>!e._hideMesh))},Form:()=>[...r],Mounted(){let e=0;for(const t of this.items)w95.debug?.assert("menuAction"===t._type),t.Message.moveTo(e),e+=t.width},Message:{update(){const e=this.items,t=e.find((e=>e.isOpen)),n=e.find((e=>e.isHovered));n&&t&&t!==n&&(e.forEach((e=>e.Message.close())),n.Message.open())},closeMenus(){this.$childWidgets.filter((e=>e.isOpen)).forEach((e=>e.Message.close()))}}}}))},136:()=>{w95.widget("menuSeparator",(function(){const e=w95.state(0),t=w95.state(0),n=w95.state(200),o=w95.state(void 0,w95.noEffect);return{get x(){return e.now},get y(){return t.now},get width(){return n.now},get height(){return 8},Form:()=>[Rngon.ngon([Rngon.vertex(0,3),Rngon.vertex(n.now,3)],{color:w95.palette.frame.darker}),Rngon.ngon([Rngon.vertex(0,4),Rngon.vertex(n.now,4)],{color:w95.palette.frame.light})],Event:{mouseenter(){o.now.Message.itemHighlighted(this)}},Message:{resize(e=0){w95.debug?.assert("number"==typeof e),n.set(e)},moveTo(n=0,o=0){w95.debug?.assert("number"==typeof n),w95.debug?.assert("number"==typeof o),e.set(n),t.set(o)},setParentMenuWidget(e){w95.debug?.assert("menu"===e?._type),o.set(e)}}}}))},760:()=>{w95.widget("nullState",(function({x:e=0,y:t=0,width:n=0,height:o=0,children:r}={}){return w95.debug?.assert(Array.isArray(r)),w95.state.suppress=!0,{get x(){return e},get y(){return t},get width(){return n},get height(){return o},Mounted(){w95.state.suppress=!1},Form:()=>r}}))},384:()=>{w95.widget("panel",(function({x:e=0,y:t=0,width:n=200,height:o=22,color:r=w95.palette.named.navy,cursor:s,onClick:i,onDoubleClick:a}={}){return w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert("number"==typeof o),w95.debug?.assert("object"==typeof r),w95.debug?.assert(["undefined","object"].includes(typeof s)),w95.debug?.assert(["undefined","function"].includes(typeof i)),w95.debug?.assert(["undefined","function"].includes(typeof a)),w95.debug?.assert(n>0),w95.debug?.assert(o>0),{get x(){return e},get y(){return t},get width(){return n},get height(){return o},get cursor(){return s},Form:()=>[Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(n,0),Rngon.vertex(n,o),Rngon.vertex(0,o)],{color:r})],Event:{dblclick({at:e}){return a?.({at:e,widget:this})},mouseup({at:e}){return i?.({at:e,widget:this})}}}}))},410:()=>{w95.widget("progressBar",(function({x:e=0,y:t=0,width:n=200,height:o=13,color:r=w95.palette.named.navy,value:s=50,isDisabled:i=!1,styleHints:a=[w95.styleHint.solid]}={}){return w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert("number"==typeof o),w95.debug?.assert("number"==typeof s),w95.debug?.assert("object"==typeof r),w95.debug?.assert(Array.isArray(a)),{get x(){return e},get y(){return t},get width(){return n},get height(){return o},Form:()=>[w95.widget.frame({x:0,y:0,width:n,height:o}),...d()]};function d(){const e=Math.min(i?n-2:n,Math.floor(n/100*s));if(e<=0)return[];if(a.includes(w95.styleHint.solid)){const t=i?2:0;return[Rngon.ngon([Rngon.vertex(t,t),Rngon.vertex(e,t),Rngon.vertex(e,o-t),Rngon.vertex(t,o-t)],{color:i?w95.palette.widget.disabled1:r})]}if(a.includes(w95.styleHint.dashed)){const t=6,s=Math.ceil((e-2)/(t+2));return!Number.isFinite(s)||s<1||s>4096?[]:new Array(s).fill().map(((e,s)=>{const a=2+(t+2)*s,d=Math.min(t,n-a);return Rngon.ngon([Rngon.vertex(a,2),Rngon.vertex(a+d,2),Rngon.vertex(a+d,o-2),Rngon.vertex(a,o-2)],{color:i?w95.palette.widget.disabled1:r})}))}}}))},378:()=>{w95.widget("radioGroup",(function({x:e=0,y:t=0,items:n={"Item 1":{},"Item 2":{y:18,isDisabled:!0}},state:o=new w95.StateVariable(0),isDisabled:r=!1,onChange:s}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("object"==typeof n),w95.debug?.assert(o instanceof w95.StateVariable),w95.debug?.assert("number"==typeof o.now),w95.debug?.assert("boolean"==typeof r),w95.debug?.assert(["undefined","function"].includes(typeof s));const i=w95.state(200),a=w95.state(100);return{get x(){return e},get y(){return t},get width(){return i.now},get height(){return a.now},Mounted(){i.set(Math.max(...this.$descendants.map((e=>e.at.x+e.widget.width)))),a.set(Math.max(...this.$descendants.map((e=>e.at.y+e.widget.height))))},Form(){const e=Object.keys(n).reduce(((e,t,r)=>{const i=n[t];return e.push(w95.widget.radioGroupItem({x:i.hasOwnProperty("x")?i.x:0,y:i.hasOwnProperty("y")?i.y:26*r,label:t,isChecked:o.now===r,isDisabled:i.isDisabled,onCheck(){o.now!==r&&(o.set(r),s?.(o.now,t))}})),e}),[]);return w95.widget.frame({width:i.now,height:a.now,shape:w95.frameShape.none,children:e})}}}))},365:()=>{w95.widget("radioGroupItem",(function({x:e=0,y:t=0,label:n="Radio item",isChecked:o=!1,isDisabled:r=!1,onCheck:s}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("string"==typeof n),w95.debug?.assert("boolean"==typeof o),w95.debug?.assert(["undefined","function"].includes(typeof s));const i=w95.state(!1),a=w95.state(!1),d=w95.state(1),w=w95.font.default.regular.lineHeight+r;return{get x(){return e},get y(){return t},get width(){return d.now},get height(){return w},get isGrabbed(){return i.now},get isHovered(){return a.now},Mounted(){d.set(Math.max(...this.$descendants.map((e=>e.at.x+e.widget.width))))},Form:()=>[w95.widget.frame({width:d.now,height:w,shape:w95.frameShape.none,children:[w95.widget.panel({width:12,height:12,color:r||i.now&&a.now?w95.palette.window.background:w95.palette.named.white}),w95.widget.bitmap({image:w95.icon.radioButton}),w95.widget.bitmap({x:4,y:4,image:w95.icon.dotmark,color:r?w95.palette.widget.disabled1:w95.palette.widget.foreground},{hideIf:!o}),w95.widget.label({x:18,height:w,text:n,isDisabled:r,styleHints:[w95.styleHint.alignVCenter,w95.styleHint.action]})]})],Event:{mouseleave:()=>(a.set(!1),!0),mouseenter:()=>(a.set(!0),!0),mousedown(){if(!r)return i.set(!0),!0},mouseup(){if(r)return;let e=!0;return i.now&&a.now&&(e=s?.(this)??!0),i.set(!1),e}}}}))},77:()=>{w95.widget("renderSurface",(function({x:e=0,y:t=0,width:n=100,height:o=100,meshes:r=[Rngon.mesh()],backgroundColor:s=w95.palette.named.black,isDisabled:i=!1,options:a={},pipeline:d={},id:w="$w95-render-surface",cursor:g,onTick:u,onMouseDown:l,onMouseUp:c,onMouseMove:h,onMouseLeave:f,onMouseEnter:b}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert("number"==typeof o),w95.debug?.assert("object"==typeof a),w95.debug?.assert(["undefined","number"].includes(typeof a.resolution)),w95.debug?.assert("object"==typeof d),w95.debug?.assert("string"==typeof w),w95.debug?.assert(Array.isArray(r)),w95.debug?.assert(["undefined","object"].includes(typeof g)),w95.debug?.assert(["undefined","function"].includes(typeof u)),w95.debug?.assert(["undefined","function"].includes(typeof l)),w95.debug?.assert(["undefined","function"].includes(typeof c)),w95.debug?.assert(["undefined","function"].includes(typeof h)),w95.debug?.assert(["undefined","function"].includes(typeof f)),w95.debug?.assert(["undefined","function"].includes(typeof b)),w95.debug?.assert(n>0),w95.debug?.assert(o>0);const p=w95.state(0),y=~~(n*(a.resolution||1)),m=~~(o*(a.resolution||1));i||Rngon.render({meshes:r,options:{...a,context:w,resolution:{width:y,height:m}},pipeline:d});const x=s===w95.palette.named.transparent?Rngon.ngon([]):Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(n,0),Rngon.vertex(n,o),Rngon.vertex(0,o)],{color:s});return{get x(){return e},get y(){return t},get width(){return n},get height(){return o},get renderContext(){return Rngon.context[w]},get cursor(){return g},Mounted(){u&&w95.tick.listen(v=v.bind(this))},BeforeUnmount(){u&&w95.tick.unlisten(v)},Form(){if(Rngon.context[w])return[Rngon.ngon([Rngon.vertex(0,0),Rngon.vertex(n,0),Rngon.vertex(n,o),Rngon.vertex(0,o)],{allowAlphaReject:!0,allowAlphaBlend:!0,texture:{$constructor:"Texture",width:Rngon.context[w].pixelBuffer.width,height:Rngon.context[w].pixelBuffer.height,pixels:Rngon.context[w].pixelBuffer.data},isDisabled:i}),x]},Event:{mouseleave({at:e}){return f?.({at:e,widget:this})},mouseenter({at:e}){return b?.({at:e,widget:this})},mousedown({at:e}){return l?.({at:e,widget:this})},mouseup({at:e}){return c?.({at:e,widget:this})},mousemove({at:e}){return h?.({at:e,widget:this})}}};function v(e){i||this._hideMesh||(p.set(p.now+1),u(e,p.now,r))}}))},156:()=>{w95.widget("scrollArea",(function({x:e=0,y:t=0,width:n=200,height:o=100,isDisabled:r=!1,frameShape:s=w95.frameShape.input,children:i=[],styleHints:a=[],backgroundColor:d,cursor:w,onMouseDown:g,onMouseUp:u,onClick:l,onDoubleClick:c,onMouseMove:h,onMouseLeave:f,onMouseEnter:b}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert("number"==typeof o),w95.debug?.assert("string"==typeof s),w95.debug?.assert(Array.isArray(i)),w95.debug?.assert(["undefined","object"].includes(typeof w)),w95.debug?.assert(["undefined","object"].includes(typeof d)),w95.debug?.assert(["undefined","function"].includes(typeof g)),w95.debug?.assert(["undefined","function"].includes(typeof u)),w95.debug?.assert(["undefined","function"].includes(typeof l)),w95.debug?.assert(["undefined","function"].includes(typeof c)),w95.debug?.assert(["undefined","function"].includes(typeof h)),w95.debug?.assert(["undefined","function"].includes(typeof f)),w95.debug?.assert(["undefined","function"].includes(typeof b));const p=a.includes(w95.styleHint.hideVerticalScrollBar),y=a.includes(w95.styleHint.showVerticalScrollBar),m=a.includes(w95.styleHint.hideHorizontalScrollBar),x=a.includes(w95.styleHint.showHorizontalScrollBar),v=w95.state(0),R=w95.state(!1),M={hasExcess:w95.state(!1),scrollPos:w95.state(0),handlePos:w95.state(0),handleSize:w95.state(16),contentLength:w95.state(10),isVisible:w95.state(y),viewportSize:w95.state(o)},k={hasExcess:w95.state(!1),scrollPos:w95.state(0),handlePos:w95.state(0),handleSize:w95.state(16),contentLength:w95.state(10),isVisible:w95.state(x),viewportSize:w95.state(n)},H=(()=>{switch(s){case w95.frameShape.none:return 0;case w95.frameShape.plain:return 1;default:return 2}})(),S=16;function C(){const e=k.contentLength.now-k.viewportSize.now;k.hasExcess.set(e>0),k.isVisible.set(!m&&(x||k.hasExcess.now)),k.viewportSize.set(n-2*H-(M.isVisible.now?S:0)),k.handleSize.set(Math.max(S,k.viewportSize.now-e-32));const t=M.contentLength.now-M.viewportSize.now;M.scrollExcess=t,M.hasExcess.set(t>0),M.isVisible.set(!p&&(y||M.hasExcess.now)),M.viewportSize.set(o-2*H-(k.isVisible.now?S:0)),M.handleSize.set(Math.max(S,M.viewportSize.now-t-32))}return{get x(){return e},get y(){return t},get width(){return n},get height(){return o},get isGrabbed(){return Boolean(R.now)},Mounted(){const e=this.$("_contents");k.contentLength.set(Math.max(...e.$descendants.map((e=>e.at.x+e.widget.width)))),M.contentLength.set(Math.max(...e.$descendants.map((e=>e.at.y+e.widget.height)))),C(),M.handlePos.now&&(M.handlePos.set(Math.min(M.viewportSize.now-M.handleSize.now-32,M.handlePos.now)),M.handleSize.now>S&&M.scrollPos.set(Math.max(0,~~M.handlePos.now))),k.handlePos.now&&(k.handlePos.set(Math.min(k.viewportSize.now-k.handleSize.now-32,k.handlePos.now)),k.handleSize.now>S&&k.scrollPos.set(Math.max(0,~~k.handlePos.now)))},Form:()=>[w95.widget.frame({$name:"_background",cursor:w,x:H,y:H,width:n-M.isVisible.now*S-H-H,height:o-k.isVisible.now*S-H-H,shape:w95.frameShape.none,backgroundColor:r?w95.palette.window.background:d,onClick:l,onDoubleClick:c,onMouseDown({at:e,widget:t}){e.x+=k.scrollPos.now,e.y+=M.scrollPos.now,g?.({at:e,widget:t})},onMouseUp:u,onMouseEnter:b,onMouseLeave:f,onMouseMove:h}),w95.widget.frame({$name:"_contents",x:H-k.scrollPos.now,y:H-M.scrollPos.now,width:k.contentLength.now,height:M.contentLength.now,shape:w95.frameShape.none,children:i}),w95.widget.frame({width:n,height:o,shape:s}),w95.widget.frame({x:k.viewportSize.now+H,y:H,width:S,height:M.viewportSize.now,backgroundColor:w95.palette.named.transparent,shape:w95.frameShape.none,children:[w95.widget.frame({x:0,y:S,width:S,height:M.viewportSize.now-32,backgroundColor:w95.palette.named.offwhite,shape:w95.frameShape.none,onMouseDown({at:e}){if(!r)return e.y<M.handlePos.now?(A("vertical",-M.handleSize.now),!0):e.y>=M.handlePos.now+M.handleSize.now?(A("vertical",M.handleSize.now),!0):void 0}}),w95.widget.frame({x:0,y:M.handlePos.now+S,width:S,height:M.handleSize.now,shape:w95.frameShape.dropdownButton,backgroundColor:w95.palette.widget.background,onMouseDown({at:e}){if(!r)return R.set("vertical"),v.set(e.y+S+1),!0}},{hideIf:!M.hasExcess.now}),w95.widget.button({x:0,y:0,width:S,height:S,icon:w95.icon.arrowUp,shape:w95.buttonShape.dropdown,isDisabled:r||!M.hasExcess.now,onClick:()=>(A("vertical",-1),!0)}),w95.widget.button({x:0,y:M.viewportSize.now-S,width:S,height:S,icon:w95.icon.arrowDown,shape:w95.buttonShape.dropdown,isDisabled:r||!M.hasExcess.now,onClick:()=>(A("vertical",1),!0)})]},{hideIf:p||!M.isVisible.now}),w95.widget.frame({x:H,y:M.viewportSize.now+H,width:k.viewportSize.now,height:S,backgroundColor:w95.palette.named.transparent,shape:w95.frameShape.none,children:[w95.widget.frame({x:S,y:0,width:k.viewportSize.now-32,height:S,backgroundColor:w95.palette.named.offwhite,shape:w95.frameShape.none,onMouseDown({at:e}){if(!r)return e.x<k.handlePos.now?(A("horizontal",-k.handleSize.now),!0):e.x>=k.handlePos.now+k.handleSize.now?(A("horizontal",k.handleSize.now),!0):void 0}}),w95.widget.frame({x:k.handlePos.now+S,y:0,width:k.handleSize.now,height:S,shape:w95.frameShape.dropdownButton,backgroundColor:w95.palette.widget.background,onMouseDown({at:e}){if(!r)return R.set("horizontal"),v.set(e.x+S+1),!0}},{hideIf:!k.hasExcess.now}),w95.widget.button({x:0,y:0,width:S,height:S,icon:w95.icon.arrowLeft,isDisabled:r||!k.hasExcess.now,onClick(){A("horizontal",-1)}}),w95.widget.button({x:k.viewportSize.now-S,y:0,width:S,height:S,icon:w95.icon.arrowRight,isDisabled:r||!k.hasExcess.now,onClick(){A("horizontal",1)}})]},{hideIf:m||!k.isVisible.now}),w95.widget.panel({x:n-S-H,y:o-S-H,width:S,height:S,color:w95.palette.window.background},{hideIf:!M.isVisible.now||!k.isVisible.now})],Event:{mousemove({at:e}){switch(R.now){case"horizontal":return A("horizontal",e.x-v.now-k.handlePos.now);case"vertical":return A("vertical",e.y-v.now-M.handlePos.now);default:return}},mouseup(){R.set(!1)},wheel({event:e}){A("vertical",e.deltaY/8)}},Message:{scrollToVerticalTarget(e,t=0){if(this.isGrabbed)return;w95.debug?.assert("number"==typeof e),e=Math.max(0,e);const n=M.scrollPos.now+M.viewportSize.now-t;e>n?A("vertical",e-n):e<M.scrollPos.now&&A("vertical",e-M.scrollPos.now)},scrollToBottom(){this.isGrabbed||M.scrollExcess>0&&A("vertical",M.scrollExcess)}}};function A(e="vertical",t){const n="vertical"===e?M:k;C();const o=n.viewportSize.now-n.handleSize.now-32;if(o<=0)return;n.handlePos.set(Math.min(o,Math.max(0,n.handlePos.now+t)));const r=(n.contentLength.now-n.viewportSize.now)/o||0;n.scrollPos.set(~~(n.handlePos.now*r))}}))},463:()=>{w95.widget("stackedWidget",(function({x:e=0,y:t=0,width:n=200,height:o=100,isDisabled:r=!1,stacks:s={default:[w95.widget.label({})]},stackIndex:i="default",newStackIndex:a}={}){return w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert("number"==typeof o),w95.debug?.assert("object"==typeof s&&Object.values(s).every((e=>Array.isArray(e)))),w95.debug?.assert(["undefined","function"].includes(typeof a)),{get x(){return e},get y(){return t},get width(){return n},get height(){return o},get stackIndex(){return i},Form(){const e=Object.entries(s).map((e=>w95.widget.frame({$name:e[0],width:n,height:o,shape:w95.frameShape.none,children:e[1]},{hideIf:e[0]!==i})));return w95.widget.frame({$name:"_stacks",width:n,height:o,shape:w95.frameShape.none,isDisabled:r,children:e})}}}))},900:()=>{w95.widget("tabControl",(function({x:e=0,y:t=0,width:n=200,height:o=100,isDisabled:r=!1,state:s=new w95.StateVariable(0),tabs:i={"Tab control":{},Besides:{isDisabled:!0}},onChange:a}={}){return w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert("number"==typeof o),w95.debug?.assert("object"==typeof i||Array.isArray(i)),w95.debug?.assert(s instanceof w95.StateVariable),w95.debug?.assert(["undefined","function"].includes(typeof a)),Array.isArray(i)||(i=Object.entries(i).map((e=>({label:e[0],options:e[1]})))),{get x(){return e},get y(){return t},get width(){return n},get height(){return o},get tabIndex(){return s.now},Form(){const e=i.reduce(((e,t,n)=>{const o=0===n,i=n===s.now,d=w95.font.stringWidth(t.label)+13;return e.buttons.push(w95.widget.button({x:e.x-(i?2:0),y:i?0:2,width:d+(i?4:0),height:20+(i?2:0),text:t.label,isDisabled:(r||t.options.isDisabled)&&n!==s.now,shape:w95.buttonShape.tabControl,styleHints:[o?w95.styleHint.first:w95.styleHint.void],onMouseDown(){s.now!==n&&(s.set(n),a?.(n))}})),e.x+=d,e}),{x:2,buttons:[]}).buttons,t=e.splice(s.now,1)[0],d=i.map(((e,t)=>w95.widget.frame({x:2,y:2,width:n-4,height:o-20-4,shape:w95.frameShape.none,children:e.options.children},{hideIf:t!==s.now})));return[...e,w95.widget.frame({x:0,y:20,width:n,height:o-20,shape:w95.frameShape.widget,children:[...d]}),t]}}}))},391:()=>{w95.widget("textEdit",(function({x:e=0,y:t=0,width:n=200,height:o=100,state:r=new w95.StateVariable("Aa"),font:s=w95.font.courier8,color:i=w95.palette.widget.foreground,backgroundColor:a=w95.palette.named.white,allowFormatting:d=!0,isEditable:w=!0,isDisabled:g=!1,wordWrap:u=!0,autofocus:l=!1,styleHints:c=[],highlighter:h,onChange:f}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert("number"==typeof o),w95.debug?.assert("boolean"==typeof w),w95.debug?.assert("boolean"==typeof u),w95.debug?.assert("object"==typeof i),w95.debug?.assert("object"==typeof a),w95.debug?.assert(r instanceof w95.StateVariable),w95.debug?.assert("string"==typeof r.now),w95.debug?.assert(Array.isArray(c)),w95.debug?.assert(["undefined","function"].includes(typeof h)),w95.debug?.assert(["undefined","function"].includes(typeof f));const b=w95.state(!1),p=w95.state(r.now),y=w95.state(0,w95.noEffect),m=w95.state(!0),x=w95.state(void 0,(({widget:e})=>{m.set(!0),e.$("scroll-area").Message.scrollToVerticalTarget(e.cursorPosition.y-1,20)})),v=p.now.split("\n"),R=c.includes(w95.styleHint.bold)?s.bold:s.regular;let M;return{get x(){return e},get y(){return t},get width(){return n},get height(){return o},get hasFocus(){return b.now},get autofocus(){return l},get displayText(){return this.$("text-display").text},get cursorCharacterPosition(){return{x:p.now.slice(0,x.now).split("\n").at(-1).length,y:p.now.slice(0,x.now).split("\n").length-1}},get cursorPosition(){const e=!c.includes(w95.styleHint.noBorder),{x:t,y:n}=this.cursorCharacterPosition;return{x:1+~~e+w95.font.stringWidth(p.now.split("\n")[n].slice(0,t),s),y:~~e+n*R.lineHeight}},Opened(){x.set(0)},Mounted(){M=setTimeout((()=>{b.now&&m.set(!m.now)}),500),p.set(u?this.displayText:r.now),y.now&&(x.set(x.now+y.now),y.set(0))},BeforeUnmount(){clearTimeout(M)},Form(){return w95.widget.scrollArea({$name:"scroll-area",cursor:w95.cursor.text,width:n,height:o,frameShape:c.includes(w95.styleHint.noBorder)?w95.frameShape.none:w95.frameShape.input,styleHints:[w95.styleHint.showVerticalScrollBar],backgroundColor:g?w95.palette.window.background:a,children:[w95.widget.label({$name:"text-display",x:c.includes(w95.styleHint.noBorder)?0:2,text:h?.(r.now)||r.now,font:s,width:u?n-24:void 0,wordWrap:u,allowFormatting:d,color:g?w95.palette.widget.disabled1:i}),Rngon.ngon([Rngon.vertex(this.cursorPosition.x,this.cursorPosition.y),Rngon.vertex(this.cursorPosition.x,this.cursorPosition.y+R.lineHeight-1)],{color:m.now&&b.now?i:w95.palette.named.transparent})],onMouseDown:({at:e})=>{if(g)return;const t=Math.min(~~(e.y/R.lineHeight),v.length-1),n=v[t],o=n.split("").findIndex(((t,o)=>{const r=t.charCodeAt(0),i=32===r?R.spaceWidth:R[r]?.width||0;return w95.font.stringWidth(n.substring(0,o),s)>~~(e.x-i/2)})),r=o<0?n.length:o,i=v.slice(0,t).reduce(((e,t)=>e+t.length+1),0);return x.set(i+r),this.Message.focus(),!0}})},Message:{blur(){b.set(!1)},focus(){g||(m.set(!0),b.set(!0))},moveCursorToEnd(){x.set(r.now.length)}},Event:{keypress(e){w95.debug?.assert(e instanceof KeyboardEvent),w95.debug?.assert("string"==typeof e.key);let t=r.now;1===e.key.length&&(t=t.slice(0,x.now)+e.key+t.slice(x.now),w&&r.now!==t&&(y.set(1),r.set(t),f?.(r.now,this)))},keydown(e){if(w95.debug?.assert(e instanceof KeyboardEvent),w95.debug?.assert("string"==typeof e.key),1===e.key.length)return;let t=r.now;if("ArrowLeft"==e.key)x.set(Math.max(0,x.now-1));else if("ArrowRight"==e.key)x.set(Math.min(p.now.length,x.now+1));else if("ArrowUp"==e.key)if(0===this.cursorCharacterPosition.y)x.set(0);else{const e=v.slice(0,this.cursorCharacterPosition.y-1).reduce(((e,t)=>e+t.length+1),0);x.set(e+Math.min(this.cursorCharacterPosition.x,v[this.cursorCharacterPosition.y-1].length))}else if("ArrowDown"==e.key)if(this.cursorCharacterPosition.y===v.length-1)x.set(p.now.length);else{const e=v.slice(0,this.cursorCharacterPosition.y+1).reduce(((e,t)=>e+t.length+1),0);x.set(e+Math.min(this.cursorCharacterPosition.x,v[this.cursorCharacterPosition.y+1].length))}w&&("Backspace"==e.key?x.now&&(t=t.slice(0,x.now-1)+t.slice(x.now),y.set(-1)):"Delete"==e.key?x.now<p.now.length&&(t=t.slice(0,x.now)+t.slice(x.now+1)):"Escape"==e.key?this.Message.blur():["Enter","Return"].includes(e.key)&&(t=t.slice(0,x.now)+"\n"+t.slice(x.now),y.set(1)),r.now!==t&&(m.set(!0),r.set(t),f?.(r.now,this)))}}}}))},797:()=>{w95.widget("time",(function({x:e=0,y:t=0,width:n=200,height:o=w95.font.default.regular.lineHeight,showSeconds:r=!1,isDisabled:s=!1,styleHints:i=[]}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert(["undefined","number"].includes(typeof n)),w95.debug?.assert("number"==typeof o),w95.debug?.assert("boolean"==typeof r),w95.debug?.assert(Array.isArray(i));const a=w95.state(w(w95.clock.now)),d=w95.state((e=>a.set(w(e))));return n=n||w95.font.stringWidth(a),{get x(){return e},get y(){return t},get width(){return n},get height(){return o},Mounted(){w95.clock.listen(d.now)},BeforeUnmount(){w95.clock.unlisten(d.now)},Form:()=>w95.widget.label({text:a.now,width:n,height:o,styleHints:i,isDisabled:s})};function w(e){return e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:r?"2-digit":void 0}).replace(/^0/,"")}}))},635:()=>{w95.widget("titleBar",(function({x:e=0,y:t=0,width:n=200,height:o=18,title:r="Title bar",icon:s=w95.icon.applicationIcon16x16,styleHints:i=[],isBlurred:a=!1,onClose:d,onDragStart:w,onDragEnd:g}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert("number"==typeof o),w95.debug?.assert("boolean"==typeof a),w95.debug?.assert("object"==typeof s),w95.debug?.assert("string"==typeof r),w95.debug?.assert(Array.isArray(i)),w95.debug?.assert(["undefined","function"].includes(typeof d)),w95.debug?.assert(["undefined","function"].includes(typeof w)),w95.debug?.assert(["undefined","function"].includes(typeof g));const u=w95.state(!1,(()=>u.now?w?.():g?.())),l=w95.state(void 0,w95.noEffect),c=i.includes(w95.styleHint.dialog);return c&&(s=void 0),{get x(){return e},get y(){return t},get width(){return n},get height(){return o},get title(){return r},Form:()=>[w95.widget.panel({width:n,height:o,color:a?w95.palette.window.titleBar.inactiveBackground:w95.palette.window.titleBar.background}),w95.widget.bitmap({x:2,y:1,image:s},{hideIf:!s||c}),w95.widget.label({x:s?5+s.width:3,y:0,width:n-(s?5+s.width:3)-(c?22:56),height:o,text:r.replace(/\n/g," ").trim(),elide:!0,color:a?w95.palette.window.titleBar.inactiveForeground:w95.palette.window.titleBar.foreground,styleHints:[w95.styleHint.bold,w95.styleHint.alignVCenter,w95.styleHint.noDisable]},{hideIf:!r.length}),w95.widget.button({x:n-17-1,y:2,width:16,height:14,icon:w95.icon.titleBarClose,isDisabled:!d,onClick:d}),w95.widget.button({x:n-17-19,y:2,width:16,height:14,isDisabled:!0,icon:w95.icon.titleBarMaximize,onClick:h},{hideIf:c}),w95.widget.button({x:n-17-35,y:2,width:16,height:14,isDisabled:!0,icon:w95.icon.titleBarMinimize},{hideIf:c}),w95.widget.frame({$name:"_grabber",x:s?5+s.width:3,y:0,width:n-(s?5+s.width:3)-(c?22:56),height:o,isGrabbable:!0,shape:w95.frameShape.none,backgroundColor:w95.palette.named.transparent,onMouseDown(){u.set(!0)},onMouseUp(){u.set(!1)},onMouseMove({event:e,isGrabbed:t}){if(t)return w95.debug?.assert("object"==typeof e),w95.debug?.assert("number"==typeof e.movementX),w95.debug?.assert("number"==typeof e.movementY),w95.debug?.assert("w95-widget"===l.now._what),w95.debug?.assert(["window","dialog"].includes(l.now._type)),l.now.Message?.move?.(e.movementX/w95.shell.display.scale,e.movementY/w95.shell.display.scale),!0},onDoubleClick:h})],Message:{setParent(e){w95.debug?.assert("w95-widget"===e?._what),w95.debug?.assert(["window","dialog"].includes(e?._type)),l.set(e)}}};function h(){w95.debug?.assert("w95-widget"===l.now._what),l.now.Message?.maximize?.()}}))},756:()=>{w95.widget("verticalLayout",(function({x:e=0,y:t=0,width:n=200,height:o=100,padding:r=3,styleHints:s=[],children:i=[]}={}){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert("number"==typeof o),w95.debug?.assert(Array.isArray(s)),w95.debug?.assert(Array.isArray(i));const a=w95.state(e),d=w95.state(t),w=w95.state(o,w95.noEffect);return{get x(){return a.now},get y(){return d.now},get width(){return n},get height(){return w.now},Mounted(){const e=this.$childWidgets.filter((e=>!e.$childWidgets[0]._hideMesh));{const n=e.reduce(((e,t)=>{const n=t.$childWidgets[0];return e+n.height+("layoutSpacer"===n._type?0:r)}),-r*!!i.filter((e=>"layoutSpacer"!==e._type)).length);s.includes(w95.styleHint.alignVCenter)?d.set(t+~~((o-n)/2)):(s.includes(w95.styleHint.alignBottom)&&d.set(t+o-n),w.set(n))}{let t=0;for(const o of e){const e=o.$childWidgets[0];"layoutSpacer"!==e._type&&(o.Message.resize(e.width,e.height),s.includes(w95.styleHint.alignRight)?o.Message.move(n-e.width,t):s.includes(w95.styleHint.alignLeft)?o.Message.move(0,t):s.includes(w95.styleHint.alignHCenter)?o.Message.move(~~((n-e.width)/2),t):o.Message.move(0,t)),t+=e.height+(e.height&&"layoutSpacer"!==e._type?r:0)}}},Form:()=>i.map((e=>w95.widget.dynamicWrapper({widget:e})))}}))},520:()=>{w95.widget("verticalRule",(function({x:e=0,y:t=0,height:n=40}={}){return w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),w95.debug?.assert("number"==typeof n),w95.debug?.assert(n>=0),{get x(){return e},get y(){return t},get width(){return 2},get height(){return n},Form:()=>[Rngon.ngon([Rngon.vertex(0,t),Rngon.vertex(0,t+n)],{color:w95.palette.frame.darker}),Rngon.ngon([Rngon.vertex(1,t),Rngon.vertex(1,t+n)],{color:w95.palette.frame.light})]}}))},224:()=>{w95.widget("window",(function({parent:e,title:t="",backgroundColor:n=w95.palette.window.background,icon:o=w95.icon.applicationIcon16x16,isBlurred:r=!0,styleHints:s=[],children:i=[],onMouseEnter:a,onMouseLeave:d,onMouseUp:w,onMouseDown:g,onMouseMove:u,onKeyUp:l,onKeyDown:c,onFocus:h,onDragStart:f,onDragEnd:b,onResizeStart:p,onResizeEnd:y,resize:m,move:x,maximize:v,close:R}={}){w95.debug?.assert("App"===e?._type),w95.debug?.assert("string"==typeof t),w95.debug?.assert("object"==typeof o),w95.debug?.assert("boolean"==typeof r),w95.debug?.assert("object"==typeof n),w95.debug?.assert(Array.isArray(s)),w95.debug?.assert(Array.isArray(i)),w95.debug?.assert(["undefined","function"].includes(typeof d)),w95.debug?.assert(["undefined","function"].includes(typeof a)),w95.debug?.assert(["undefined","function"].includes(typeof w)),w95.debug?.assert(["undefined","function"].includes(typeof g)),w95.debug?.assert(["undefined","function"].includes(typeof u)),w95.debug?.assert(["undefined","function"].includes(typeof l)),w95.debug?.assert(["undefined","function"].includes(typeof c)),w95.debug?.assert(["undefined","function"].includes(typeof h)),w95.debug?.assert(["undefined","function"].includes(typeof f)),w95.debug?.assert(["undefined","function"].includes(typeof b)),w95.debug?.assert(["undefined","function"].includes(typeof p)),w95.debug?.assert(["undefined","function"].includes(typeof y)),w95.debug?.assert(["undefined","function"].includes(typeof m)),w95.debug?.assert(["undefined","function"].includes(typeof x)),w95.debug?.assert(["undefined","function"].includes(typeof v)),w95.debug?.assert(["undefined","function"].includes(typeof R));const M=e.width,k=e.height;r=w95.state(r),s.includes(w95.styleHint.desktop)&&s.push(w95.styleHint.plain,w95.styleHint.noBorder);const H=s.includes(w95.styleHint.plain),S=s.includes(w95.styleHint.desktop),C=s.includes(w95.styleHint.noBorder);let A;return{get x(){return 0},get y(){return 0},get width(){return M},get height(){return k},get menuBar(){return A},get isBlurred(){return r.now},get isDesktop(){return S},get isGrabbed(){return this.$("_window-title-bar").$("_grabber").isGrabbed},get isBorderGrabbed(){return this.$("_window-border").isBorderGrabbed},get title(){return t},get icon(){return o},Mounted(){const e=this.$("_window-contents").$childWidgets,t=e.findIndex((e=>"menuBar"===e._type));A=e[t],this.$("_window-title-bar").Message.setParent(this),this.$("_window-border").Message.setParent(this)},Form(){return[w95.widget.panel({width:M,height:k,color:n},{hideIf:n===w95.palette.named.transparent}),w95.widget.frame({$name:"_window-contents",x:4,y:H?0:23,width:M-6-2,height:k-(H?0:27),styleHints:[w95.styleHint.noBorder],children:i}),w95.widget.titleBar({$name:"_window-title-bar",x:4,y:4,width:M-6-2,height:18,isBlurred:r.now,title:t,icon:o,onClose:R?.bind(this),onDragStart:f,onDragEnd:b},{hideIf:H}),w95.widget.frame({$name:"_window-border",width:M,height:k,isResizable:"function"==typeof m,onResizeStart:p,onResizeEnd:y,shape:w95.frameShape.resizableWindow},{hideIf:C})]},Message:{resize(e=0,t=0){w95.debug?.assert(["number","undefined"].includes(typeof e)),w95.debug?.assert(["number","undefined"].includes(typeof t)),m?.call(this,e,t)},move(e=0,t=0){w95.debug?.assert("number"==typeof e),w95.debug?.assert("number"==typeof t),x?.call(this,e,t)},maximize(){v?.call(this)},blur(){r.set(!0),w95.$recurseDescendantWidgets(this,(e=>{e.Message?.blur?.()}))},focus(){r.now&&w95.$recurseDescendantWidgets(this,(e=>{e.Message?.parentWindowRaised?.()})),r.set(!1),h?.()}},Event:{mousedown({at:e}){return g?.({at:e,widget:this})},mouseup({at:e}){return w?.({at:e,widget:this})},mousemove({at:e}){return u?.({at:e,widget:this})},keyup(e){return l?.({event:e,widget:this})},keydown(e){return c?.({event:e,widget:this})}}}}))}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";n.r(o),n(328),n(167),n(384),n(224),n(255),n(192),n(635),n(750),n(391),n(214),n(107),n(929),n(136),n(882),n(420),n(879),n(220),n(410),n(77),n(11),n(752),n(300),n(149),n(900),n(463),n(156),n(378),n(365),n(997),n(428),n(501),n(756),n(520),n(856),n(786),n(830),n(760),n(797)})();var r=self;for(var s in o)r[s]=o[s];o.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();